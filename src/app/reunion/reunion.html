<app-menu></app-menu>
<br />
<br />
<br />
<div class="container-all">
  <div class="container-essayer">
    <div class="demo">
      <h1>DÃ©mo VoiceTask</h1>
      <p>Testez notre assistant vocal intelligent</p>

      <div class="card">
        <h3><i class="fa fa-microphone"></i> Interface Vocale</h3>
        <small>Dites "Planifie rÃ©union [titre]"</small>

        <div class="mic-container">
          <div class="mic-button">
            <i class="fa fa-microphone"></i>
          </div>
          <button class="voice-button">Gemini Text</button>
        </div>
        <div class="transcription-box-button" *ngIf="transcription">
          <button (click)="createMeeting()" [disabled]="loadingGemni">
            <span *ngIf="!loadingGemni">Create Meeting</span>
            <span *ngIf="loadingGemni" class="spinner"></span>
          </button>
        </div>
      </div>
      <div class="card-2">
        <div class="exemple">
          ðŸ’¡ Exemples : Create a meeting with John tomorrow at 2PM
        </div>
      </div>
    </div>

    <!-- *************************************************** -->
    <h1>ðŸ“… Liste des RÃ©unions</h1>
    <div class="meetings-container">
      <div class="meeting-card" *ngFor="let meet of meetings; let i = index">
        <div class="meeting-title">
          {{ meet.title || "RÃ©union " + (i + 1) }}
        </div>
        <div class="meeting-date">
          ðŸ“† {{ meet.start_time || "Date non dÃ©finie" }}
        </div>
        <div class="meeting-description">
          {{ meet.description || "Aucune description fournie" }}
        </div>
        <div class="meeting-code">
          Code Meeting : {{ meet.room || "Aucun code fourni" }}
        </div>
        <a
          *ngIf="meet.room"
          [href]="'https://meet.jit.si/' + meet.room"
          class="btn-join"
          target="_blank"
        >
          Rejoindre
        </a>
      </div>

      <!-- Fallback if no meetings -->
      <div *ngIf="!meetings.length" class="no-meetings">
        ðŸš« Aucune rÃ©union trouvÃ©e.
      </div>
    </div>

    <!-- âœ¨ NEW: Join by code -->
    <div class="join">
      <div class="join-by-code">
        <h2>ðŸ”‘ Rejoindre avec un code</h2>
        <input
          type="text"
          [(ngModel)]="joinCode"
          placeholder="Entrez le code de rÃ©union"
        />
        <button
          (click)="joinMeetingByCode()"
          [disabled]="!joinCode || joinCode.trim() === ''"
        >
          Rejoindre
        </button>
      </div>
    </div>
  </div>
  <br />

  <app-footer></app-footer>
</div>
